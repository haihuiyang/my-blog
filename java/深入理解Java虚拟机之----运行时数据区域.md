#### 运行时数据区域

![运行时数据区域](https://img-blog.csdn.net/20180628221647915?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hhaWh1aV95YW5n/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

1、程序计数器（PC）

程序计数器是一块较小的内存空间，它可以看作是当前现成所执行的字节码的行号指示器。线程私有，该内存区域是**唯一一个**在 Java 虚拟机规范中没有规定任何 `OutOfMemoryError` 情况的区域。

2、Java 虚拟机栈

线程私有。虚拟机栈描述的是 Java 方法执行的内存模型：每个方法在执行的同时都会创建一个栈帧用于存储局部变量表、操作数栈、动态链接、方法出口等信息。

如果线程请求的栈深度大于虚拟机所允许的深度，将抛出 `StackOverflowError` 异常；如果虚拟机栈可以动态扩展，如果扩展时无法申请到足够的内存，就会抛出 `OutOfMemoryError` 异常。

3、本地方法栈

与虚拟机栈作用类似，区别在于虚拟机栈为虚拟机执行 Java 方法服务，而本地方法栈则为虚拟机使用到的 Native 方法服务。

4、Java 堆

线程共享，是虚拟机所管理的内存中最大的一块。该区域目的就是为了存放对象实例；同时它也是垃圾收集器管理的主要区域。分为新生代和老生代，分别采用不同的垃圾收集算法。可以通过 `-Xmx` 和 `-Xms` 来指定堆的最大内存和最小内存。当堆中没有内存完成实例分配，并且堆也无法扩展时，将会抛出 `OutOfMemoryError` 异常。

5、方法区

方法区和 Java 堆一样，是各个线程共享的内存区域，它用于存储已被虚拟机加载的类信息、常量、静态变量、即时编译器编译后的代码等数据。

当方法区无法满足内存分配需求时，将抛出 `OutOfMemoryError` 异常。

6、运行时常量池

运行时常量池是方法区的一部分。常量池存放的是编译期生成的各种字面量和符号引用，在类加载完成后进入方法区的运行时常量池。

7、直接内存

直接内存不是虚拟机运行时数据区的一部分，也不是 Java 虚拟机规范中定义的内存区域。但是这部分内存也被频繁地使用。

参考文献：《深入理解java虚拟机》周志明 著.